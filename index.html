<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Check-in App - Complete</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sonsie+One&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes hourglassFlip {
      0%, 100% { transform: rotate(0deg) scale(1); }
      40% { transform: rotate(180deg) scale(1); }
      60% { transform: rotate(180deg) scale(1.1); }
    }
    
    .hourglass-animate {
      animation: hourglassFlip 3s ease-in-out infinite;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
    .fade-in-down { animation: fadeInDown 0.5s ease-out forwards; }
    .scale-in { animation: scaleIn 0.4s ease-out forwards; }
    
    .team-member { transition: transform 0.2s ease; }
    .team-member:hover { transform: translateY(-4px); }
    
    .team-member.checked-in {
      cursor: pointer;
    }
    
    /* Avatar tile modern interaction - smooth and polished */
    .team-member.checked-in .w-20 {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(34, 197, 94, 0.15);
    }
    
    /* No hover state - just cursor change */
    
    /* Press state - smooth press down */
    .team-member.checked-in:active .w-20 {
      transform: translateY(1px) scale(0.96);
      box-shadow: 0 1px 4px rgba(34, 197, 94, 0.2);
      transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes vibe-float {
      0% { 
        transform: translateY(0) translateX(0) scale(0.5) rotate(0deg); 
        opacity: 0;
      }
      10% { 
        transform: translateY(-25px) translateX(calc(var(--drift-x) * 0.1)) scale(1) rotate(5deg); 
        opacity: 1;
      }
      100% { 
        transform: translateY(-200px) translateX(var(--drift-x)) scale(0.8) rotate(var(--rotate)); 
        opacity: 0; 
      }
    }
    
    .vibe-emoji-burst {
      position: fixed;
      font-size: 20px;
      pointer-events: none;
      z-index: 100;
      animation: vibe-float 3s ease-out forwards;
      will-change: transform, opacity;
    }
    
    .check-in-btn { transition: all 0.2s ease; }
    .check-in-btn:hover { transform: scale(1.02); box-shadow: 0 10px 25px -5px rgba(239, 68, 68, 0.3); }
    .check-in-btn:active { transform: scale(0.98); }
    
    .mood-btn { transition: all 0.2s ease; }
    .mood-btn:hover:not(.selected) { transform: scale(1.02); }
    .mood-btn:active:not(:disabled) { transform: scale(0.98); }
    
    .submit-btn { transition: all 0.2s ease; }
    .submit-btn:hover { transform: scale(1.02); }
    .submit-btn:active { transform: scale(0.98); }
    
    .additional-fields {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .additional-fields.show {
      max-height: 500px;
      opacity: 1;
      margin-top: 1.5rem;
    }

    .screen { display: none; }
    .screen.active { display: block; }
    
    @keyframes bounce-subtle {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.05); }
    }
    
    @keyframes rotate-clockwise {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes badge-zoom-in {
      0% { transform: scale(0.5); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .badge-container {
      animation: badge-zoom-in 1.3s ease-out forwards;
    }
    
    @keyframes coin-flip {
      0% { transform: rotateY(0deg); }
      50% { transform: rotateY(90deg); }
      100% { transform: rotateY(0deg); }
    }
    
    .coin-flip-animation {
      animation: coin-flip 0.6s ease-in-out;
    }
    
    .badge-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .badge-front {
      transform: rotateY(0deg);
    }
    
    .badge-back {
      transform: rotateY(180deg);
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    @keyframes gentle-shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      75% { transform: translateX(4px); }
    }
    
    @keyframes emoji-float {
      0% { 
        transform: translateY(0) translateX(0) scale(0.5) rotate(0deg); 
        opacity: 0;
      }
      10% { 
        transform: translateY(-25px) translateX(calc(var(--drift-x) * 0.1)) scale(1) rotate(5deg); 
        opacity: 1;
      }
      100% { 
        transform: translateY(-250px) translateX(var(--drift-x)) scale(0.8) rotate(var(--rotate)); 
        opacity: 0; 
      }
    }
    
    .smoke-emoji {
      position: absolute;
      font-size: 16px;
      pointer-events: none;
      animation: emoji-float 4s ease-out forwards;
      will-change: transform, opacity;
    }
    
    .gentle-shake-once {
      animation: gentle-shake 0.4s ease-in-out;
    }
    
    .error-shake {
      animation: shake 0.5s;
    }
    
    .error-field {
      border-color: #EF4444 !important;
      border-width: 1.5px !important;
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- SCREEN 1: Home Page -->
  <div id="screen1" class="screen active">
    <!-- Top Status Bar -->
    <div class="h-16 flex items-center justify-between px-4" style="background-color: rgba(238, 192, 112, 0.12);">
      <div class="max-w-md w-full mx-auto flex items-center justify-between">
        <!-- Logo on the left -->
        <!-- Logo on the left -->
        <div style="font-family: 'Sonsie One', cursive; font-size: 16px; color: #EE7470;">Knock-Knock</div>
        
        <!-- Right side: Bell icon and Profile picture -->
        <div class="flex items-center gap-3">
          <!-- Notification bell icon with circle background -->
          <div onclick="goToScreen4()" class="relative w-9 h-9 flex items-center justify-center cursor-pointer hover:scale-105 transition-transform">
            <div class="absolute inset-0 rounded-full" style="background-color: rgba(238, 192, 112, 0.24);"></div>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#EE7470" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="relative z-10">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
          </div>
          
          <!-- Profile picture -->
          <div onclick="goToScreen5()" class="w-9 h-9 bg-cyan-100 rounded-full flex items-center justify-center text-xl cursor-pointer hover:scale-105 transition-transform" style="border: 0.5px solid #EEC070; box-sizing: border-box;">üêÑ</div>
        </div>
      </div>
    </div>
    
    <div class="min-h-screen px-4 pb-14 max-w-md mx-auto">

      <div class="mb-8 mt-8 fade-in-down" style="animation-delay: 0.1s">
        <div>
          <h1 class="text-3xl font-bold text-gray-900 mb-1">Hello, Advait Kulkarni</h1>
          <p id="current-date" class="text-gray-500 text-sm"></p>
        </div>
      </div>

      <!-- Pending Update / Success Badge -->
      <div id="pending-update" class="flex flex-col items-center justify-center py-20 mb-8 fade-in-up" style="animation-delay: 0.2s">
        <div class="text-5xl mb-6 hourglass-animate">‚è≥</div>
        <p class="text-gray-600 text-lg fade-in-up" style="animation-delay: 0.4s">How's the vibe today?</p>
      </div>

      <div id="success-badge" class="hidden flex-col items-center justify-center py-12 mb-8">
        <div class="relative flex items-center justify-center mb-6 badge-container" style="perspective: 1000px;">
          <div id="badge-flip-container" style="position: relative; width: 140px; height: 140px; transform-style: preserve-3d;">
            <!-- Front face: checkmark -->
            <div class="badge-face badge-front">
              <svg width="140" height="140" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" style="animation: rotate-clockwise 8s linear infinite">
                <path d="M86.7995 4.21918C92.4881 -1.40629 101.644 -1.40629 107.333 4.21918C111.49 8.33001 117.698 9.56492 123.112 7.35782C130.52 4.33751 138.98 7.84148 142.083 15.2157C144.35 20.6044 149.613 24.1211 155.459 24.1538C163.46 24.1985 169.934 30.6729 169.979 38.6732C170.012 44.5195 173.528 49.7826 178.917 52.05C186.291 55.1529 189.795 63.6122 186.775 71.0206C184.568 76.4343 185.803 82.6426 189.914 86.7996C195.539 92.4883 195.539 101.645 189.914 107.333C185.803 111.49 184.568 117.699 186.775 123.112C189.795 130.521 186.291 138.98 178.917 142.083C173.528 144.35 170.012 149.613 169.979 155.46C169.934 163.46 163.46 169.934 155.459 169.979C149.613 170.012 144.35 173.528 142.083 178.917C138.98 186.291 130.52 189.795 123.112 186.775C117.698 184.568 111.49 185.803 107.333 189.914C101.644 195.539 92.4881 195.539 86.7995 189.914C82.6425 185.803 76.4342 184.568 71.0205 186.775C63.6121 189.795 55.1528 186.291 52.0499 178.917C49.7825 173.528 44.5193 170.012 38.6731 169.979C30.6728 169.934 24.1983 163.46 24.1537 155.46C24.121 149.613 20.6043 144.35 15.2156 142.083C7.84136 138.98 4.33739 130.521 7.3577 123.112C9.56479 117.699 8.32989 111.49 4.21906 107.333C-1.40641 101.645 -1.40641 92.4883 4.21906 86.7996C8.32989 82.6426 9.56479 76.4343 7.3577 71.0206C4.33739 63.6122 7.84136 55.1529 15.2156 52.05C20.6043 49.7826 24.121 44.5195 24.1537 38.6732C24.1983 30.6729 30.6728 24.1985 38.6731 24.1538C44.5193 24.1211 49.7825 20.6044 52.0499 15.2157C55.1528 7.84148 63.6121 4.33751 71.0205 7.35782C76.4342 9.56492 82.6425 8.33001 86.7995 4.21918Z" fill="#BBF7D0"/>
              </svg>
              <svg width="60" height="60" viewBox="0 0 60 60" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                <path d="M15 30 L26 41 L45 19" stroke="#059669" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" fill="none" />
              </svg>
            </div>
            <!-- Back face: profile emoji -->
            <div class="badge-face badge-back">
              <svg width="140" height="140" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" style="animation: rotate-clockwise 8s linear infinite">
                <path d="M86.7995 4.21918C92.4881 -1.40629 101.644 -1.40629 107.333 4.21918C111.49 8.33001 117.698 9.56492 123.112 7.35782C130.52 4.33751 138.98 7.84148 142.083 15.2157C144.35 20.6044 149.613 24.1211 155.459 24.1538C163.46 24.1985 169.934 30.6729 169.979 38.6732C170.012 44.5195 173.528 49.7826 178.917 52.05C186.291 55.1529 189.795 63.6122 186.775 71.0206C184.568 76.4343 185.803 82.6426 189.914 86.7996C195.539 92.4883 195.539 101.645 189.914 107.333C185.803 111.49 184.568 117.699 186.775 123.112C189.795 130.521 186.291 138.98 178.917 142.083C173.528 144.35 170.012 149.613 169.979 155.46C169.934 163.46 163.46 169.934 155.459 169.979C149.613 170.012 144.35 173.528 142.083 178.917C138.98 186.291 130.52 189.795 123.112 186.775C117.698 184.568 111.49 185.803 107.333 189.914C101.644 195.539 92.4881 195.539 86.7995 189.914C82.6425 185.803 76.4342 184.568 71.0205 186.775C63.6121 189.795 55.1528 186.291 52.0499 178.917C49.7825 173.528 44.5193 170.012 38.6731 169.979C30.6728 169.934 24.1983 163.46 24.1537 155.46C24.121 149.613 20.6043 144.35 15.2156 142.083C7.84136 138.98 4.33739 130.521 7.3577 123.112C9.56479 117.699 8.32989 111.49 4.21906 107.333C-1.40641 101.645 -1.40641 92.4883 4.21906 86.7996C8.32989 82.6426 9.56479 76.4343 7.3577 71.0206C4.33739 63.6122 7.84136 55.1529 15.2156 52.05C20.6043 49.7826 24.121 44.5195 24.1537 38.6732C24.1983 30.6729 30.6728 24.1985 38.6731 24.1538C44.5193 24.1211 49.7825 20.6044 52.0499 15.2157C55.1528 7.84148 63.6121 4.33751 71.0205 7.35782C76.4342 9.56492 82.6425 8.33001 86.7995 4.21918Z" fill="#BBF7D0"/>
              </svg>
              <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotateY(180deg) scaleX(-1); font-size: 60px;">üêÑ</div>
            </div>
          </div>
        </div>
        <h2 class="text-xl font-bold text-gray-900 mb-2 text-center">You're all set!</h2>
        <p class="text-gray-600 text-center">Your Check-in has been submitted</p>
        <div class="flex items-center justify-center gap-3">
          <p id="home-timestamp" class="text-gray-400 text-sm text-center">Updated [--:--]</p>
          <button id="home-edit-btn" class="hidden text-rose-400 text-sm underline hover:text-rose-500 transition-colors bg-transparent border-0" onclick="goToScreen2()">
            View
          </button>
        </div>
      </div>

      <!-- Check-in Button -->
      <button id="check-in-btn" onclick="goToScreen2()" class="w-full bg-rose-400 hover:bg-rose-500 text-white text-lg font-medium py-4 rounded-2xl mb-8 shadow-sm check-in-btn fade-in-up" style="animation-delay: 0.3s">
        Check-in Now
      </button>

      <div class="fade-in-up" style="animation-delay: 0.4s">
        <h2 class="text-2xl font-semibold text-gray-900 mb-2">Team updates</h2>
        <div class="flex items-center justify-between mb-6 relative">
          <div class="relative inline-block">
            <p id="team-status" class="text-gray-500 text-sm">4 of 6 checked in ‚Ä¢ 0 blockers</p>
            <!-- Smoke emoji container positioned exactly at the bullet (‚Ä¢) -->
            <div id="smoke-container" style="position: absolute; left: 111px; top: 20px;"></div>
          </div>
          <!-- Toggle button with label -->
          <div class="flex items-center gap-2">
            <span class="text-xs text-gray-500">See Details</span>
            <button id="view-toggle" onclick="toggleView()" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none bg-gray-200">
              <span id="toggle-dot" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1"></span>
            </button>
          </div>
        </div>
        
        <!-- Grid view (default) -->
        <div id="grid-view" class="grid grid-cols-3 gap-x-4 gap-y-6">
          <div class="flex flex-col items-center team-member checked-in scale-in" style="animation-delay: 0.5s; position: relative;" onclick="showVibeEmojis('aarav', this)">
            <div class="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-green-100 border-2 border-green-300">ü¶â</div>
            <p class="text-sm text-gray-900 text-center font-medium leading-tight">Aarav Sharma</p>
          </div>
          <div class="flex flex-col items-center team-member checked-in scale-in" style="animation-delay: 0.6s; position: relative;" onclick="showVibeEmojis('ananya', this)">
            <div class="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-green-100 border-2 border-green-300">ü¶ä</div>
            <p class="text-sm text-gray-900 text-center font-medium leading-tight">Ananya Iyer</p>
          </div>
          <div class="flex flex-col items-center team-member checked-in scale-in" style="animation-delay: 0.7s; position: relative;" onclick="showVibeEmojis('ishaan', this)">
            <div class="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-green-100 border-2 border-green-300">üê•</div>
            <p class="text-sm text-gray-900 text-center font-medium leading-tight">Ishaan Mehta</p>
          </div>
          <div class="flex flex-col items-center team-member checked-in scale-in" style="animation-delay: 0.8s; position: relative;" onclick="showVibeEmojis('riyas', this)">
            <div class="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-green-100 border-2 border-green-300">üêë</div>
            <p class="text-sm text-gray-900 text-center font-medium leading-tight">Riyas Ahmed</p>
          </div>
          <div class="flex flex-col items-center team-member scale-in" style="animation-delay: 0.9s; position: relative;" onclick="if(isCheckedIn) showVibeEmojis('advait', this)">
            <div class="relative">
              <div id="advait-card" class="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-white border-2 border-gray-200">üêÑ</div>
              <div id="advait-blocker-icon" class="hidden absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center">
                <span class="text-white text-xs font-bold">!</span>
              </div>
            </div>
            <p class="text-sm text-gray-900 text-center font-medium leading-tight">Advait Kulkarni</p>
          </div>
          <div class="flex flex-col items-center team-member scale-in" style="animation-delay: 1s; position: relative;">
            <div class="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-white border-2 border-gray-200">üêµ</div>
            <p class="text-sm text-gray-900 text-center font-medium leading-tight">Vihaan Patel</p>
          </div>
        </div>
        
        <!-- Column/List view (hidden by default) -->
        <div id="list-view" class="hidden flex flex-col gap-6">
          <!-- Checked-in group -->
          <div>
            <h3 class="text-sm font-semibold text-gray-700 mb-3">Checked-in</h3>
            <div class="bg-white rounded-xl p-4 flex flex-col gap-3">
              <!-- Vibe emoji legend -->
              <div class="flex items-center justify-end gap-6 pb-3 border-b border-gray-100" style="padding-right: 16px;">
                <span class="text-base">üî•</span>
                <span class="text-base">üòä</span>
                <span class="text-base">üò∞</span>
                <span class="text-base">üò≠</span>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 flex items-center justify-center text-2xl">ü¶â</div>
                  <div class="flex flex-col" style="gap: 4px;">
                    <p class="text-sm text-gray-900 font-medium">Aarav Sharma</p>
                    <p id="aarav-time" class="text-xs text-gray-400"></p>
                  </div>
                </div>
                <div class="flex items-center gap-6" style="padding-right: 16px;">
                  <span class="text-xs text-gray-600 w-4 text-center">1</span>
                  <span class="text-xs text-gray-600 w-4 text-center">2</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                </div>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 flex items-center justify-center text-2xl">ü¶ä</div>
                  <div class="flex flex-col" style="gap: 4px;">
                    <p class="text-sm text-gray-900 font-medium">Ananya Iyer</p>
                    <p id="ananya-time" class="text-xs text-gray-400"></p>
                  </div>
                </div>
                <div class="flex items-center gap-6" style="padding-right: 16px;">
                  <span class="text-xs text-gray-600 w-4 text-center">1</span>
                  <span class="text-xs text-gray-600 w-4 text-center">1</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                </div>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 flex items-center justify-center text-2xl">üê•</div>
                  <div class="flex flex-col" style="gap: 4px;">
                    <p class="text-sm text-gray-900 font-medium">Ishaan Mehta</p>
                    <p id="ishaan-time" class="text-xs text-gray-400"></p>
                  </div>
                </div>
                <div class="flex items-center gap-6" style="padding-right: 16px;">
                  <span class="text-xs text-gray-600 w-4 text-center">2</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                </div>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 flex items-center justify-center text-2xl">üêë</div>
                  <div class="flex flex-col" style="gap: 4px;">
                    <p class="text-sm text-gray-900 font-medium">Riyas Ahmed</p>
                    <p id="riyas-time" class="text-xs text-gray-400"></p>
                  </div>
                </div>
                <div class="flex items-center gap-6" style="padding-right: 16px;">
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span class="text-xs text-gray-600 w-4 text-center">2</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span class="text-xs text-gray-300 w-4 text-center">-</span>
                </div>
              </div>
              
              <div id="advait-list-item" class="hidden justify-between items-center relative">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 flex items-center justify-center text-2xl">üêÑ</div>
                  <div class="flex flex-col" style="gap: 4px;">
                    <p class="text-sm text-gray-900 font-medium">Advait Kulkarni</p>
                    <div class="flex items-center gap-2">
                      <p id="advait-time" class="text-xs text-gray-400"></p>
                      <!-- Message button with issue count - entire area clickable -->
                      <button id="advait-message-btn" class="hidden items-center gap-0.5 hover:opacity-80 transition-opacity" onclick="handleMessageClick()">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#FB7185" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                        <span id="advait-issue-count" class="text-xs font-medium" style="color: #FB7185;"></span>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-6" style="padding-right: 16px;">
                  <span id="advait-vibing" class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span id="advait-flowing" class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span id="advait-struggling" class="text-xs text-gray-300 w-4 text-center">-</span>
                  <span id="advait-blocked" class="text-xs text-gray-300 w-4 text-center">-</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Pending group -->
          <div>
            <h3 class="text-sm font-semibold text-gray-700 mb-3">Pending</h3>
            <div class="bg-white rounded-xl p-4 flex flex-col gap-3">
              <div id="advait-list-item-pending" class="flex items-center gap-3 relative">
                <div class="w-10 h-10 flex items-center justify-center text-2xl">üêÑ</div>
                <p class="text-sm text-gray-900 font-medium">Advait Kulkarni</p>
              </div>
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 flex items-center justify-center text-2xl">üêµ</div>
                <p class="text-sm text-gray-900 font-medium">Vihaan Patel</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Issue Details Overlay Modal -->
  <div id="issue-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center px-4">
    <div class="bg-white rounded-2xl max-w-md w-full p-6 relative">
      <!-- Close button -->
      <button onclick="closeIssueModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <!-- User header with avatar and name -->
      <div class="flex items-center gap-3 mb-6 pb-4 border-b border-gray-200">
        <div class="w-9 h-9 bg-cyan-100 rounded-full flex items-center justify-center text-xl" style="border: 0.5px solid #EEC070;">üêÑ</div>
        <div>
          <h2 class="text-xl font-bold text-gray-900">Advait Kulkarni</h2>
          <p id="modal-timestamp" class="text-xs text-gray-400"></p>
        </div>
      </div>
      
      <!-- Modal content - project cards -->
      <div id="modal-content" class="space-y-4 pb-16">
        <!-- Content will be dynamically inserted here -->
      </div>
    </div>
  </div>

  <!-- About Knock-Knock Modal -->
  <div id="about-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 py-8">
    <div class="bg-white rounded-2xl max-w-md w-full max-h-[85vh] overflow-y-auto px-8 py-6 relative my-auto shadow-2xl">
      <!-- Close button -->
      <button onclick="closeAboutModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <!-- Logo -->
      <div class="text-center mb-3">
        <div style="font-family: 'Sonsie One', cursive; font-size: 28px; color: #EE7470;">Knock-Knock</div>
      </div>
      
      <!-- Subheading -->
      <h2 class="text-lg font-normal text-gray-700 text-center mb-6">Your daily 'Vibe-Check' at work</h2>
      
      <!-- Main content -->
      <div class="space-y-4 text-gray-700 text-sm leading-relaxed">
        <p>
          Knock-Knock, a personal AI project by <span class="font-medium">Dhaneesh Jameson</span>, replaces draining, scheduled stand-ups with high-energy, &lt;30-second async "vibe-checks." Tailored for the Gen Z, remote-first workforce, it eliminates the context-switching fatigue and "performance anxiety" typical of traditional meetings across time zones.
        </p>
        
        <p>
          Rather than replacing your project management stack, Knock-Knock acts as a cultural companion, stripping the dry status update out of the calendar and turning it into a social-style pulse check.
        </p>
        
        <p>
          This approach restores individual freedom and protects deep-work blocks, replacing rigid bureaucracy with authentic, high-velocity team connection.
        </p>
        
        <!-- Highlights -->
        <div class="mt-6">
          <h3 class="font-semibold text-gray-900 mb-3">Highlights:</h3>
          <ul class="space-y-2 ml-4">
            <li class="flex gap-2">
              <span class="text-rose-400 font-bold">‚Ä¢</span>
              <span><span class="font-medium">Protects Deep Work:</span> Updates on your own time.</span>
            </li>
            <li class="flex gap-2">
              <span class="text-rose-400 font-bold">‚Ä¢</span>
              <span><span class="font-medium">Vibe-First:</span> Prioritises team sentiment and authentic engagement.</span>
            </li>
            <li class="flex gap-2">
              <span class="text-rose-400 font-bold">‚Ä¢</span>
              <span>It is designed for high-signal brevity, ensuring 'vibe-checks' remain a focused team pulse rather than a distraction from deep work or other noisy alternatives.</span>
            </li>
          </ul>
        </div>
        
        <!-- Strategic Limitation -->
        <div class="mt-6 p-4 bg-gray-50 rounded-xl">
          <p class="text-xs text-gray-600">
            <span class="font-semibold text-gray-900">Strategic Limitation:</span> Not a project-level task-tracker, but the essential glue for the modern remote stack.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- SCREEN 2: Check-in Page -->
  <div id="screen2" class="screen">
    <div class="min-h-screen bg-gray-50">
      <div class="max-w-md mx-auto px-4 py-6 pb-32">


        <div class="flex items-center mb-8">
          <button onclick="goToScreen1()" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.921 7.5L7.714 13.292L7 14L0 7L7 0L7.714 0.708L1.92 6.5H14V7.5H1.921Z" fill="#6B6B6B"/>
            </svg>
            <span class="text-sm">Back</span>
          </button>
          <h1 class="text-xl font-semibold text-gray-900 flex-1 text-center pr-14">Drop the vibe for today</h1>
        </div>

        <!-- Update History Timeline (moved to top when editing) -->
        <div id="edit-history-timeline" class="hidden pb-6 mb-4">
          <div class="flex items-baseline gap-2 mb-1">
            <h3 class="text-base font-semibold text-gray-900">Check-in History</h3>
          </div>
          <p class="text-sm text-gray-500 mb-4">1 edit/day limit. Keep the vibes consistent.</p>
          <div id="timeline-list" class="space-y-4">
            <!-- Timeline items will be inserted here -->
          </div>
        </div>

        <!-- Daily limit reached message -->
        <div id="daily-limit-message" class="hidden text-center mb-4">
          <p class="text-sm text-gray-500">(Daily check-in limit reached)</p>
        </div>

        <!-- Project 1 -->
        <div id="project1-card" class="bg-white rounded-2xl p-6 mb-4">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-900">Agent Dashboard</h2>
            <span class="text-sm text-gray-400">1/2</span>
          </div>
          <div class="grid grid-cols-4 gap-3 mb-4">
            <button onclick="selectMood(1, 'Vibing')" class="mood-btn mood-1-vibing flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üî•</span>
              <span class="text-xs font-medium text-gray-600">Vibing</span>
            </button>
            <button onclick="selectMood(1, 'Flowing')" class="mood-btn mood-1-flowing flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üòä</span>
              <span class="text-xs font-medium text-gray-600">Flowing</span>
            </button>
            <button onclick="selectMood(1, 'Struggling')" class="mood-btn mood-1-struggling flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üò∞</span>
              <span class="text-xs font-medium text-gray-600">Struggling</span>
            </button>
            <button onclick="selectMood(1, 'Blocked')" class="mood-btn mood-1-blocked flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üò≠</span>
              <span class="text-xs font-medium text-gray-600">Blocked</span>
            </button>
          </div>
          <div id="project1-fields" class="additional-fields">
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-900 mb-2">What's the issue?</label>
              <textarea id="project1-issue" placeholder="Describe the issue" rows="4" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-gray-400 resize-none text-sm"></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-900 mb-2">Who can help? (optional)</label>
              <div class="relative">
                <select id="project1-helper" class="w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-gray-400 appearance-none text-sm text-gray-600 bg-white cursor-pointer">
                  <option value="">Select an option</option>
                  <option>Self (Advait)</option>
                  <option>Aarav Sharma</option>
                  <option>Ananya Iyer</option>
                  <option>Ishaan Mehta</option>
                  <option>Riyas Ahmed</option>
                  <option>Vihaan Patel</option>
                  <option>Outside Team</option>
                </select>
                <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Project 2 -->
        <div id="project2" class="bg-white rounded-2xl p-6 mb-4 border-2 border-dashed border-gray-300">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-400">Design Systems</h2>
            <span class="text-sm text-gray-300">2/2</span>
          </div>
          <p id="project2-locked-msg" class="text-gray-400 text-center py-8">Complete previous project first</p>
          <div id="project2-moods" class="grid grid-cols-4 gap-3 mb-4 hidden">
            <button onclick="selectMood(2, 'Vibing')" class="mood-btn mood-2-vibing flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üî•</span>
              <span class="text-xs font-medium text-gray-600">Vibing</span>
            </button>
            <button onclick="selectMood(2, 'Flowing')" class="mood-btn mood-2-flowing flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üòä</span>
              <span class="text-xs font-medium text-gray-600">Flowing</span>
            </button>
            <button onclick="selectMood(2, 'Struggling')" class="mood-btn mood-2-struggling flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üò∞</span>
              <span class="text-xs font-medium text-gray-600">Struggling</span>
            </button>
            <button onclick="selectMood(2, 'Blocked')" class="mood-btn mood-2-blocked flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer" style="background-color: #F9FAFB; border: 2px solid #E5E7EB;">
              <span class="text-3xl mb-2">üò≠</span>
              <span class="text-xs font-medium text-gray-600">Blocked</span>
            </button>
          </div>
          <div id="project2-fields" class="additional-fields">
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-900 mb-2">What's the issue?</label>
              <textarea id="project2-issue" placeholder="Describe the issue" rows="4" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-gray-400 resize-none text-sm"></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-900 mb-2">Who can help? (optional)</label>
              <div class="relative">
                <select id="project2-helper" class="w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-gray-400 appearance-none text-sm text-gray-600 bg-white cursor-pointer">
                  <option value="">Select an option</option>
                  <option>Self (Advait)</option>
                  <option>Aarav Sharma</option>
                  <option>Ananya Iyer</option>
                  <option>Ishaan Mehta</option>
                  <option>Riyas Ahmed</option>
                  <option>Vihaan Patel</option>
                  <option>Outside Team</option>
                </select>
                <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div id="errorMessage" class="hidden fixed bottom-28 left-0 right-0">
        <div class="max-w-md mx-auto px-4">
          <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm text-center">
            Please complete all required fields to continue
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="fixed bottom-0 left-0 right-0 bg-gray-50 py-6">
        <div class="max-w-md mx-auto px-4 space-y-3">
          <!-- Discard button - only shown when editing -->
          <button id="discardBtn" onclick="discardChanges()" class="hidden w-full py-4 rounded-2xl text-lg font-medium bg-transparent text-rose-400 border-2 border-rose-400 hover:bg-rose-50 transition-all">
            Discard
          </button>
          <!-- Submit button -->
          <button id="submitBtn" onclick="handleSubmit()" class="submit-btn w-full py-4 rounded-2xl text-lg font-medium bg-rose-400 text-white hover:bg-rose-500">
            Submit Check-in
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- SCREEN 3: Success Page -->
  <div id="screen3" class="screen">
    <div class="min-h-screen bg-gray-50">
      <!-- Confetti Container -->
      <div id="confetti-container" class="fixed inset-0 pointer-events-none overflow-hidden z-50"></div>
      
      <div class="max-w-md mx-auto px-4 py-6 pb-32">


        <div class="flex flex-col items-center mt-12">
          <!-- Success Badge -->
          <div class="relative flex items-center justify-center mb-8">
            <svg width="180" height="180" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" style="animation: rotate-clockwise 8s linear infinite">
              <path d="M86.7995 4.21918C92.4881 -1.40629 101.644 -1.40629 107.333 4.21918C111.49 8.33001 117.698 9.56492 123.112 7.35782C130.52 4.33751 138.98 7.84148 142.083 15.2157C144.35 20.6044 149.613 24.1211 155.459 24.1538C163.46 24.1985 169.934 30.6729 169.979 38.6732C170.012 44.5195 173.528 49.7826 178.917 52.05C186.291 55.1529 189.795 63.6122 186.775 71.0206C184.568 76.4343 185.803 82.6426 189.914 86.7996C195.539 92.4883 195.539 101.645 189.914 107.333C185.803 111.49 184.568 117.699 186.775 123.112C189.795 130.521 186.291 138.98 178.917 142.083C173.528 144.35 170.012 149.613 169.979 155.46C169.934 163.46 163.46 169.934 155.459 169.979C149.613 170.012 144.35 173.528 142.083 178.917C138.98 186.291 130.52 189.795 123.112 186.775C117.698 184.568 111.49 185.803 107.333 189.914C101.644 195.539 92.4881 195.539 86.7995 189.914C82.6425 185.803 76.4342 184.568 71.0205 186.775C63.6121 189.795 55.1528 186.291 52.0499 178.917C49.7825 173.528 44.5193 170.012 38.6731 169.979C30.6728 169.934 24.1983 163.46 24.1537 155.46C24.121 149.613 20.6043 144.35 15.2156 142.083C7.84136 138.98 4.33739 130.521 7.3577 123.112C9.56479 117.699 8.32989 111.49 4.21906 107.333C-1.40641 101.645 -1.40641 92.4883 4.21906 86.7996C8.32989 82.6426 9.56479 76.4343 7.3577 71.0206C4.33739 63.6122 7.84136 55.1529 15.2156 52.05C20.6043 49.7826 24.121 44.5195 24.1537 38.6732C24.1983 30.6729 30.6728 24.1985 38.6731 24.1538C44.5193 24.1211 49.7825 20.6044 52.0499 15.2157C55.1528 7.84148 63.6121 4.33751 71.0205 7.35782C76.4342 9.56492 82.6425 8.33001 86.7995 4.21918Z" fill="#BBF7D0"/>
            </svg>
            <svg width="80" height="80" viewBox="0 0 80 80" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
              <path d="M20 40 L35 55 L60 25" stroke="#059669" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" fill="none" />
            </svg>
          </div>
          
          <h1 class="text-2xl font-bold text-gray-900 mb-2">You're all set!</h1>
          <p class="text-gray-600 text-center">Your Check-in has been submitted</p>
          <p id="timestamp" class="text-gray-400 text-sm text-center mb-12">Updated [--:--]</p>
        </div>

        <!-- Project Summaries (dynamically generated) -->
        <div id="project-summaries"></div>

        <!-- Edit Button / Limit Message -->
        <div class="mb-4 text-center" id="edit-section">
          <button id="edit-btn-success" onclick="editCheckIn()" class="text-base font-medium text-rose-400 underline hover:text-rose-500 transition-colors bg-transparent border-0">
            Edit entry
          </button>
          <p id="edit-subtitle" class="text-sm text-gray-400 mt-1">1 edit/day limit. Keep the vibes consistent.</p>
          <p id="edit-limit-msg" class="hidden text-sm text-gray-500">
            Daily check-in limit reached. Catch you tomorrow for more updates.
          </p>
        </div>

        <!-- Done Button -->
        <div class="fixed bottom-0 left-0 right-0 bg-gray-50 py-6">
          <div class="max-w-md mx-auto px-4">
            <div class="relative">
              <!-- Progress border that follows button outline -->
              <svg class="absolute inset-0 w-full h-full pointer-events-none" style="overflow: visible;">
                <rect id="progress-border" x="1" y="1" width="0" height="calc(100% - 2)" rx="15" ry="15" 
                      fill="none" stroke="#E11D48" stroke-width="3" 
                      stroke-dasharray="1000" stroke-dashoffset="1000"
                      style="transition: stroke-dashoffset 5s linear;"/>
              </svg>
              <button onclick="doneCheckIn()" class="relative w-full py-4 rounded-2xl text-lg font-medium bg-rose-400 text-white hover:bg-rose-500 transition-all">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SCREEN 4: Notifications Page -->
  <div id="screen4" class="screen">
    <div class="min-h-screen bg-gray-50">
      <div class="max-w-md mx-auto px-4 py-6">
        <!-- Header -->
        <div class="flex items-center mb-8">
          <button onclick="goToScreen1()" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.921 7.5L7.714 13.292L7 14L0 7L7 0L7.714 0.708L1.92 6.5H14V7.5H1.921Z" fill="#6B6B6B"/>
            </svg>
            <span class="text-sm">Back</span>
          </button>
          <h1 class="text-xl font-semibold text-gray-900 flex-1 text-center pr-14">Notifications</h1>
        </div>

        <!-- Empty State with visual interest -->
        <div class="flex flex-col items-center justify-center py-20">
          <!-- Animated bell icon background -->
          <div class="relative mb-8">
            <!-- Outer glow circle -->
            <div class="absolute inset-0 w-32 h-32 -top-4 -left-4 rounded-full opacity-20 animate-pulse" style="background: radial-gradient(circle, rgba(238, 192, 112, 0.3) 0%, transparent 70%);"></div>
            
            <!-- Main circle background -->
            <div class="relative w-24 h-24 rounded-full flex items-center justify-center" style="background: linear-gradient(135deg, rgba(238, 192, 112, 0.15) 0%, rgba(238, 116, 112, 0.15) 100%);">
              <!-- Bell icon -->
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#EEC070" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="animate-swing">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
              </svg>
            </div>
            
            <!-- Floating dots -->
            <div class="absolute top-0 right-0 w-3 h-3 bg-rose-300 rounded-full opacity-60 animate-float" style="animation-delay: 0s;"></div>
            <div class="absolute bottom-2 left-0 w-2 h-2 bg-yellow-300 rounded-full opacity-60 animate-float" style="animation-delay: 0.5s;"></div>
            <div class="absolute top-8 -right-2 w-2.5 h-2.5 bg-green-300 rounded-full opacity-60 animate-float" style="animation-delay: 1s;"></div>
          </div>
          
          <!-- Text content -->
          <h2 class="text-xl font-bold text-gray-900 mb-2">No notifications today.</h2>
          <p class="text-gray-500 text-sm text-center">The vibes are just chill. üòå</p>
          
          <!-- Decorative wave -->
          <div class="mt-12 w-full max-w-xs opacity-30">
            <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg">
              <path d="M0,20 Q25,10 50,20 T100,20 T150,20 T200,20" stroke="#EEC070" stroke-width="2" fill="none" opacity="0.5">
                <animate attributeName="d" 
                  values="M0,20 Q25,10 50,20 T100,20 T150,20 T200,20;
                          M0,20 Q25,30 50,20 T100,20 T150,20 T200,20;
                          M0,20 Q25,10 50,20 T100,20 T150,20 T200,20"
                  dur="3s" 
                  repeatCount="indefinite"/>
              </path>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <style>
    @keyframes swing {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(10deg); }
      75% { transform: rotate(-10deg); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); opacity: 0.6; }
      50% { transform: translateY(-15px); opacity: 0.3; }
    }
    
    .animate-swing {
      animation: swing 3s ease-in-out infinite;
    }
    
    .animate-float {
      animation: float 3s ease-in-out infinite;
    }
  </style>

  <!-- SCREEN 5: Profile Page -->
  <div id="screen5" class="screen">
    <div class="min-h-screen bg-gray-50">
      <div class="max-w-md mx-auto px-4 py-6 pb-20">
        <!-- Header -->
        <div class="flex items-center mb-8">
          <button onclick="goToScreen1()" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.921 7.5L7.714 13.292L7 14L0 7L7 0L7.714 0.708L1.92 6.5H14V7.5H1.921Z" fill="#6B6B6B"/>
            </svg>
            <span class="text-sm">Back</span>
          </button>
          <h1 class="text-xl font-semibold text-gray-900 flex-1 text-center pr-14">Account</h1>
        </div>

        <!-- Profile Info Card -->
        <div class="bg-white rounded-2xl p-6 mb-4">
          <div class="flex items-end gap-4 mb-6">
            <div class="w-20 h-20 bg-cyan-100 rounded-full flex items-center justify-center text-5xl" style="border: 1px solid #EEC070;">üêÑ</div>
            <div class="flex-1 flex items-end justify-between">
              <div>
                <h2 class="text-xl font-bold text-gray-900 leading-none">Advait Kulkarni</h2>
                <p class="text-sm text-gray-500 mt-1">Product Designer</p>
              </div>
              <button class="text-gray-400 hover:text-gray-600 transition-colors mb-0.5">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- My Check-in History -->
        <div class="bg-white rounded-2xl p-6 mb-4">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-base font-semibold text-gray-900">My Check-in History</h3>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="#9CA3AF" stroke-width="2">
              <path d="M7 4l6 6-6 6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="space-y-3">
            <!-- Feb 11 - 1 Vibing, 1 Blocked -->
            <div class="flex items-center justify-between py-2">
              <div>
                <p class="text-sm font-medium text-gray-900">2 Projects</p>
                <p class="text-xs text-gray-500">Feb 11, 2026</p>
              </div>
              <div class="flex items-center gap-0.5">
                <div class="w-3.5 h-3.5 rounded-full" style="background-color: #22C55E;"></div>
                <div class="w-3.5 h-3.5 rounded-full" style="background-color: #EF4444;"></div>
              </div>
            </div>
            <!-- Feb 10 - 1 Vibing, 1 Flowing -->
            <div class="flex items-center justify-between py-2">
              <div>
                <p class="text-sm font-medium text-gray-900">2 Projects</p>
                <p class="text-xs text-gray-500">Feb 10, 2026</p>
              </div>
              <div class="flex items-center gap-0.5">
                <div class="w-3.5 h-3.5 rounded-full" style="background-color: #22C55E;"></div>
                <div class="w-3.5 h-3.5 rounded-full" style="background-color: #EAB308;"></div>
              </div>
            </div>
            <!-- Feb 9 - 1 Struggling -->
            <div class="flex items-center justify-between py-2">
              <div>
                <p class="text-sm font-medium text-gray-900">1 Project</p>
                <p class="text-xs text-gray-500">Feb 9, 2026</p>
              </div>
              <div class="flex items-center">
                <div class="w-3.5 h-3.5 rounded-full" style="background-color: #F97316;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Notification Settings -->
        <div class="bg-white rounded-2xl p-6 mb-4">
          <h3 class="text-base font-semibold text-gray-900 mb-4">Notification Settings</h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-gray-900">Daily Reminder</p>
                <p class="text-xs text-gray-500">Get reminded to check-in</p>
              </div>
              <button onclick="toggleNotifications()" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none bg-rose-400" id="notification-toggle">
                <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6" id="notification-dot"></span>
              </button>
            </div>
            <div class="border-t border-gray-200 pt-4" id="reminder-time-section">
              <p class="text-sm font-medium text-gray-900 mb-3">Reminder Time</p>
              <div class="flex items-center gap-3">
                <!-- Hour selector -->
                <div class="flex-1">
                  <div class="relative">
                    <input type="number" id="hour-input" min="1" max="12" value="9" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-rose-400 text-center text-lg font-medium text-gray-900 bg-white">
                    <div class="absolute inset-y-0 right-2 flex flex-col justify-center">
                      <button onclick="incrementHour()" class="h-5 flex items-center justify-center text-gray-400 hover:text-gray-700">
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                          <path d="M6 3L9 7H3L6 3Z"/>
                        </svg>
                      </button>
                      <button onclick="decrementHour()" class="h-5 flex items-center justify-center text-gray-400 hover:text-gray-700">
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                          <path d="M6 9L3 5H9L6 9Z"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                  <p class="text-xs text-gray-400 text-center mt-1">Hour</p>
                </div>
                
                <span class="text-2xl text-gray-400 font-light mb-5">:</span>
                
                <!-- Minute selector -->
                <div class="flex-1">
                  <div class="relative">
                    <input type="number" id="minute-input" min="0" max="59" value="00" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-rose-400 text-center text-lg font-medium text-gray-900 bg-white">
                    <div class="absolute inset-y-0 right-2 flex flex-col justify-center">
                      <button onclick="incrementMinute()" class="h-5 flex items-center justify-center text-gray-400 hover:text-gray-700">
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                          <path d="M6 3L9 7H3L6 3Z"/>
                        </svg>
                      </button>
                      <button onclick="decrementMinute()" class="h-5 flex items-center justify-center text-gray-400 hover:text-gray-700">
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                          <path d="M6 9L3 5H9L6 9Z"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                  <p class="text-xs text-gray-400 text-center mt-1">Minute</p>
                </div>
                
                <!-- AM/PM toggle -->
                <div class="flex-1">
                  <div class="bg-gray-100 rounded-xl p-1 flex">
                    <button id="am-btn" onclick="setAmPm('AM')" class="flex-1 py-2 rounded-lg text-sm font-medium bg-white text-gray-900 shadow-sm transition-all">
                      AM
                    </button>
                    <button id="pm-btn" onclick="setAmPm('PM')" class="flex-1 py-2 rounded-lg text-sm font-medium text-gray-500 transition-all">
                      PM
                    </button>
                  </div>
                  <p class="text-xs text-gray-400 text-center mt-1">Period</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- About Knock-Knock Link -->
        <div class="text-center" style="margin-top: 150px; margin-bottom: 40px;">
          <button onclick="openAboutModal()" class="text-base font-medium text-rose-400 hover:text-rose-500 underline transition-colors bg-transparent border-0">
            About Knock-Knock
          </button>
        </div>

        <!-- Sign Out -->
        <button class="w-full py-4 bg-white border-2 border-red-200 rounded-2xl text-base font-medium text-red-600 hover:bg-red-50 transition-colors">
          Sign Out
        </button>
      </div>
    </div>
  </div>

  <!-- SCREEN 2: Check-in Page -->
  <div id="screen3" class="screen">
    <div class="min-h-screen bg-gray-50">
      <!-- Confetti Container -->
      <div id="confetti-container" class="fixed inset-0 pointer-events-none overflow-hidden z-50"></div>
      
      <div class="max-w-md mx-auto px-4 py-6 pb-32">


        <div class="flex flex-col items-center mt-12">
          <!-- Success Badge -->
          <div class="relative flex items-center justify-center mb-8 badge-container">
            <svg width="126" height="126" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" style="animation: rotate-clockwise 8s linear infinite">
              <path d="M86.7995 4.21918C92.4881 -1.40629 101.644 -1.40629 107.333 4.21918C111.49 8.33001 117.698 9.56492 123.112 7.35782C130.52 4.33751 138.98 7.84148 142.083 15.2157C144.35 20.6044 149.613 24.1211 155.459 24.1538C163.46 24.1985 169.934 30.6729 169.979 38.6732C170.012 44.5195 173.528 49.7826 178.917 52.05C186.291 55.1529 189.795 63.6122 186.775 71.0206C184.568 76.4343 185.803 82.6426 189.914 86.7996C195.539 92.4883 195.539 101.645 189.914 107.333C185.803 111.49 184.568 117.699 186.775 123.112C189.795 130.521 186.291 138.98 178.917 142.083C173.528 144.35 170.012 149.613 169.979 155.46C169.934 163.46 163.46 169.934 155.459 169.979C149.613 170.012 144.35 173.528 142.083 178.917C138.98 186.291 130.52 189.795 123.112 186.775C117.698 184.568 111.49 185.803 107.333 189.914C101.644 195.539 92.4881 195.539 86.7995 189.914C82.6425 185.803 76.4342 184.568 71.0205 186.775C63.6121 189.795 55.1528 186.291 52.0499 178.917C49.7825 173.528 44.5193 170.012 38.6731 169.979C30.6728 169.934 24.1983 163.46 24.1537 155.46C24.121 149.613 20.6043 144.35 15.2156 142.083C7.84136 138.98 4.33739 130.521 7.3577 123.112C9.56479 117.699 8.32989 111.49 4.21906 107.333C-1.40641 101.645 -1.40641 92.4883 4.21906 86.7996C8.32989 82.6426 9.56479 76.4343 7.3577 71.0206C4.33739 63.6122 7.84136 55.1529 15.2156 52.05C20.6043 49.7826 24.121 44.5195 24.1537 38.6732C24.1983 30.6729 30.6728 24.1985 38.6731 24.1538C44.5193 24.1211 49.7825 20.6044 52.0499 15.2157C55.1528 7.84148 63.6121 4.33751 71.0205 7.35782C76.4342 9.56492 82.6425 8.33001 86.7995 4.21918Z" fill="#BBF7D0"/>
            </svg>
            <svg width="56" height="56" viewBox="0 0 80 80" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
              <path d="M20 40 L35 55 L60 25" stroke="#059669" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" fill="none" />
            </svg>
          </div>
          
          <h1 class="text-2xl font-bold text-gray-900 mb-2">You're all set!</h1>
          <p class="text-gray-600 text-center">Your Check-in has been submitted</p>
          <p id="timestamp" class="text-gray-400 text-sm text-center mb-12">Updated [--:--]</p>
        </div>

        <!-- Project Summaries (dynamically generated) -->
        <div id="project-summaries"></div>

        <!-- Edit Button -->
        <div class="mb-4 text-center">
          <button onclick="editCheckIn()" class="text-base font-medium text-gray-700 underline hover:text-gray-900 transition-colors bg-transparent border-0">
            Edit
          </button>
        </div>

        <!-- Done Button -->
        <div class="fixed bottom-0 left-0 right-0 bg-gray-50 py-6">
          <div class="max-w-md mx-auto px-4">
            <button id="done-btn" onclick="doneCheckIn()" class="relative overflow-hidden w-full py-4 rounded-2xl text-lg font-medium text-white transition-all bg-rose-400 hover:bg-rose-500">
              <!-- Progress bar - thin 2px line at top -->
              <div id="progress-bar" class="absolute top-0 left-0 bg-rose-700 rounded-tl-2xl" style="width: 0%; height: 2px; transition: none;"></div>
              <!-- Button text -->
              <span class="relative z-10">Done</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Set current date dynamically
    function setCurrentDate() {
      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      
      const now = new Date();
      const dayName = days[now.getDay()];
      const monthName = months[now.getMonth()];
      const date = now.getDate();
      
      const dateString = `${dayName}, ${monthName} ${date} (Today)`;
      document.getElementById('current-date').textContent = dateString;
    }
    
    // Set date on page load
    setCurrentDate();
    
    // Global state
    let selectedProject1Mood = null;
    let selectedProject2Mood = null;
    let project1Issue = '';
    let project2Issue = '';
    let project1Helper = '';
    let project2Helper = '';
    let isCheckedIn = false;
    let editHistory = []; // Array to store edit timestamps and moods
    let isListView = false;
    let autoTransitionTimeout = null;
    let advaitSubmissionTime = null;
    let timeUpdateInterval = null;
    let coinFlipInterval = null;
    
    // Track if user has made changes while editing
    let hasUnsavedChanges = false;
    let originalState = null; // Store original state when editing

    const moodStyles = {
      Vibing: { bg: '#F0FFF4', border: '#22C55E', shadow: '0 4px 12px rgba(34, 197, 94, 0.15)', emoji: 'üî•' },
      Flowing: { bg: '#FFFBEB', border: '#EAB308', shadow: '0 4px 12px rgba(234, 179, 8, 0.15)', emoji: 'üòä' },
      Struggling: { bg: '#FFF5F0', border: '#F97316', shadow: '0 4px 12px rgba(249, 115, 22, 0.15)', emoji: 'üò∞' },
      Blocked: { bg: '#FEF2F2', border: '#EF4444', shadow: '0 4px 12px rgba(239, 68, 68, 0.15)', emoji: 'üò≠' }
    };

    const moodTextColors = {
      Vibing: 'text-green-700',
      Flowing: 'text-yellow-700',
      Struggling: 'text-orange-700',
      Blocked: 'text-red-700'
    };

    // Navigation
    function goToScreen1() {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('screen1').classList.add('active');
      window.scrollTo(0, 0);
      
      // If user was editing and navigates back, discard unsaved changes
      if (isCheckedIn && hasUnsavedChanges && originalState) {
        selectedProject1Mood = originalState.project1Mood;
        selectedProject2Mood = originalState.project2Mood;
        project1Issue = originalState.project1Issue;
        project2Issue = originalState.project2Issue;
        project1Helper = originalState.project1Helper;
        project2Helper = originalState.project2Helper;
        
        // Reset change tracking
        hasUnsavedChanges = false;
        originalState = null;
      }
      
      // If user has already checked in, update home page to reflect that
      if (isCheckedIn) {
        updateHomePage();
      }
    }

    function goToScreen2() {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('screen2').classList.add('active');
      window.scrollTo(0, 0);
      
      // Restore previous selections if editing
      if (isCheckedIn) {
        restoreCheckInState();
        
        // Save original state to compare for changes
        originalState = {
          project1Mood: selectedProject1Mood,
          project2Mood: selectedProject2Mood,
          project1Issue: project1Issue,
          project2Issue: project2Issue,
          project1Helper: project1Helper,
          project2Helper: project2Helper
        };
        
        // Reset change tracking
        hasUnsavedChanges = false;
      }
      
      // Check if edit limit reached
      const limitReached = editHistory.length >= 2;
      const submitBtn = document.getElementById('submitBtn');
      const discardBtn = document.getElementById('discardBtn');
      const dailyLimitMessage = document.getElementById('daily-limit-message');
      const project1Card = document.getElementById('project1-card');
      const project2Card = document.getElementById('project2');
      
      if (limitReached) {
        // Hide project cards completely when limit is reached
        project1Card.classList.add('hidden');
        project2Card.classList.add('hidden');
        
        // Change button to Close
        submitBtn.textContent = 'Close';
        submitBtn.onclick = function() { goToScreen1(); };
        
        // Hide discard button
        discardBtn.classList.add('hidden');
        
        // Show daily limit message
        dailyLimitMessage.classList.remove('hidden');
      } else {
        // Show and enable project cards
        project1Card.classList.remove('hidden');
        project2Card.classList.remove('hidden');
        project1Card.style.opacity = '1';
        project1Card.style.pointerEvents = 'auto';
        project2Card.style.opacity = '1';
        project2Card.style.pointerEvents = 'auto';
        
        // Setup buttons based on whether user is editing
        if (isCheckedIn) {
          // User is editing - show Discard button and set submit to inactive state
          discardBtn.classList.remove('hidden');
          submitBtn.textContent = 'Final Check-in';
          submitBtn.disabled = true;
          submitBtn.className = 'submit-btn w-full py-4 rounded-2xl text-lg font-medium bg-gray-300 text-gray-500 cursor-not-allowed';
          submitBtn.onclick = handleSubmit;
        } else {
          // User is creating first check-in
          discardBtn.classList.add('hidden');
          submitBtn.textContent = 'Submit Check-in';
          submitBtn.disabled = false;
          submitBtn.className = 'submit-btn w-full py-4 rounded-2xl text-lg font-medium bg-rose-400 text-white hover:bg-rose-500';
          submitBtn.onclick = handleSubmit;
        }
        
        // Hide daily limit message
        dailyLimitMessage.classList.add('hidden');
      }
      
      // Show edit history timeline if user is editing (has checked in at least once)
      const timeline = document.getElementById('edit-history-timeline');
      if (isCheckedIn) {
        // Show timeline whenever user is editing, even if editHistory is empty
        // (the first submission creates the original entry to display)
        timeline.classList.remove('hidden');
        if (editHistory.length > 0) {
          renderEditHistory();
        }
      } else {
        timeline.classList.add('hidden');
      }
    }
    
    // Restore check-in state when editing
    function restoreCheckInState() {
      // Always restore from the latest editHistory entry (most recent submission)
      if (editHistory.length > 0) {
        const latestEntry = editHistory[editHistory.length - 1];
        
        // Update global state from latest entry
        selectedProject1Mood = latestEntry.project1Mood;
        selectedProject2Mood = latestEntry.project2Mood;
        project1Issue = latestEntry.project1Issue;
        project2Issue = latestEntry.project2Issue;
        project1Helper = latestEntry.project1Helper;
        project2Helper = latestEntry.project2Helper;
      }
      
      // Restore Project 1 mood visually
      if (selectedProject1Mood) {
        selectMood(1, selectedProject1Mood);
        
        // Restore Project 1 fields if they were filled
        if (project1Issue) {
          document.getElementById('project1-issue').value = project1Issue;
        }
        if (project1Helper) {
          document.getElementById('project1-helper').value = project1Helper;
        }
      }
      
      // Restore Project 2 mood visually
      if (selectedProject2Mood) {
        selectMood(2, selectedProject2Mood);
        
        // Restore Project 2 fields if they were filled
        if (project2Issue) {
          document.getElementById('project2-issue').value = project2Issue;
        }
        if (project2Helper) {
          document.getElementById('project2-helper').value = project2Helper;
        }
      }
    }

    // Toggle between grid and list view
    function toggleView() {
      isListView = !isListView;
      const gridView = document.getElementById('grid-view');
      const listView = document.getElementById('list-view');
      const toggleBtn = document.getElementById('view-toggle');
      const toggleDot = document.getElementById('toggle-dot');
      
      if (isListView) {
        // Switch to list view
        gridView.classList.add('hidden');
        listView.classList.remove('hidden');
        toggleBtn.classList.remove('bg-gray-200');
        toggleBtn.classList.add('bg-rose-400');
        toggleDot.classList.remove('translate-x-1');
        toggleDot.classList.add('translate-x-6');
        
        // Update Advait's position and blocker icon in list view
        updateListViewStatus();
        
        // Start timestamp updates
        startTimestampUpdates();
      } else {
        // Switch to grid view
        gridView.classList.remove('hidden');
        listView.classList.add('hidden');
        toggleBtn.classList.remove('bg-rose-400');
        toggleBtn.classList.add('bg-gray-200');
        toggleDot.classList.remove('translate-x-6');
        toggleDot.classList.add('translate-x-1');
        
        // Stop timestamp updates
        stopTimestampUpdates();
      }
    }
    
    // Update blocker icon in list view based on check-in status
    function updateListViewStatus() {
      const advaitListCheckedIn = document.getElementById('advait-list-item');
      const advaitListPending = document.getElementById('advait-list-item-pending');
      
      if (isCheckedIn) {
        // Move Advait to checked-in group
        advaitListCheckedIn.classList.remove('hidden');
        advaitListCheckedIn.classList.add('flex');
        advaitListPending.classList.add('hidden');
        
        // Update Advait's vibe status numbers
        updateAdvaitVibeStatus();
      } else {
        // Keep Advait in pending group
        advaitListCheckedIn.classList.add('hidden');
        advaitListCheckedIn.classList.remove('flex');
        advaitListPending.classList.remove('hidden');
      }
      
      // Update timestamps
      updateTimestamps();
    }
    
    // Update Advait's vibe status display
    function updateAdvaitVibeStatus() {
      // Reset all to '-'
      document.getElementById('advait-vibing').textContent = '-';
      document.getElementById('advait-vibing').className = 'text-xs text-gray-300 w-4 text-center';
      document.getElementById('advait-flowing').textContent = '-';
      document.getElementById('advait-flowing').className = 'text-xs text-gray-300 w-4 text-center';
      document.getElementById('advait-struggling').textContent = '-';
      document.getElementById('advait-struggling').className = 'text-xs text-gray-300 w-4 text-center';
      document.getElementById('advait-blocked').textContent = '-';
      document.getElementById('advait-blocked').className = 'text-xs text-gray-300 w-4 text-center';
      
      const messageBtn = document.getElementById('advait-message-btn');
      const issueCountSpan = document.getElementById('advait-issue-count');
      
      // Count projects by mood
      const moodCounts = { Vibing: 0, Flowing: 0, Struggling: 0, Blocked: 0 };
      
      if (selectedProject1Mood) moodCounts[selectedProject1Mood]++;
      if (selectedProject2Mood) moodCounts[selectedProject2Mood]++;
      
      // Update display for non-zero values
      if (moodCounts.Vibing > 0) {
        document.getElementById('advait-vibing').textContent = moodCounts.Vibing;
        document.getElementById('advait-vibing').className = 'text-xs text-gray-600 w-4 text-center';
      }
      if (moodCounts.Flowing > 0) {
        document.getElementById('advait-flowing').textContent = moodCounts.Flowing;
        document.getElementById('advait-flowing').className = 'text-xs text-gray-600 w-4 text-center';
      }
      if (moodCounts.Struggling > 0) {
        document.getElementById('advait-struggling').textContent = moodCounts.Struggling;
        document.getElementById('advait-struggling').className = 'text-xs text-gray-600 w-4 text-center';
      }
      if (moodCounts.Blocked > 0) {
        document.getElementById('advait-blocked').textContent = moodCounts.Blocked;
        document.getElementById('advait-blocked').className = 'text-xs text-gray-600 w-4 text-center';
      }
      
      // Calculate total issues (struggling + blocked with issue text)
      let issueCount = 0;
      if ((selectedProject1Mood === 'Struggling' || selectedProject1Mood === 'Blocked') && project1Issue && project1Issue.trim()) {
        issueCount++;
      }
      if ((selectedProject2Mood === 'Struggling' || selectedProject2Mood === 'Blocked') && project2Issue && project2Issue.trim()) {
        issueCount++;
      }
      
      // Show message button and count only if struggling/blocked AND issue text exists
      if (issueCount > 0) {
        messageBtn.classList.remove('hidden');
        messageBtn.classList.add('flex');
        issueCountSpan.textContent = issueCount;
      } else {
        messageBtn.classList.add('hidden');
        messageBtn.classList.remove('flex');
      }
    }
    
    // Handle message button click
    function handleMessageClick() {
      const modalContent = document.getElementById('modal-content');
      let html = '';
      
      // Update modal timestamp
      updateModalTimestamp();
      
      // Check if project 1 should shake
      const project1ShouldShake = selectedProject1Mood === 'Struggling' || selectedProject1Mood === 'Blocked';
      
      // Show Project 1 card (always if checked in)
      if (selectedProject1Mood) {
        html += `
          <div class="bg-gray-100 rounded-2xl p-6 ${project1ShouldShake ? 'gentle-shake-once' : ''}" id="modal-project-1">
            <div class="flex items-start justify-between mb-2">
              <h3 class="text-base font-semibold text-gray-900">Agent Dashboard (1/2)</h3>
              <span class="text-3xl">${moodStyles[selectedProject1Mood].emoji}</span>
            </div>
            <p class="text-sm text-gray-600 mb-4">
              Status: <span class="font-medium text-gray-900">${selectedProject1Mood}</span>${project1Helper ? ` ‚Ä¢ @ ${project1Helper}` : ''}
            </p>
            ${project1Issue ? `
              <div class="border-t border-gray-300 pt-4">
                <p class="text-sm text-gray-700 italic">"${project1Issue}"</p>
              </div>
            ` : ''}
          </div>
        `;
      }
      
      // Check if project 2 should shake
      const project2ShouldShake = selectedProject2Mood === 'Struggling' || selectedProject2Mood === 'Blocked';
      
      // Show Project 2 card (always if checked in)
      if (selectedProject2Mood) {
        html += `
          <div class="bg-gray-100 rounded-2xl p-6 ${project2ShouldShake ? 'gentle-shake-once' : ''}" id="modal-project-2">
            <div class="flex items-start justify-between mb-2">
              <h3 class="text-base font-semibold text-gray-900">Design Systems (2/2)</h3>
              <span class="text-3xl">${moodStyles[selectedProject2Mood].emoji}</span>
            </div>
            <p class="text-sm text-gray-600 mb-4">
              Status: <span class="font-medium text-gray-900">${selectedProject2Mood}</span>${project2Helper ? ` ‚Ä¢ @ ${project2Helper}` : ''}
            </p>
            ${project2Issue ? `
              <div class="border-t border-gray-300 pt-4">
                <p class="text-sm text-gray-700 italic">"${project2Issue}"</p>
              </div>
            ` : ''}
          </div>
        `;
      }
      
      modalContent.innerHTML = html || '<p class="text-sm text-gray-500">No project details available.</p>';
      
      // Show modal and lock scroll
      document.getElementById('issue-modal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    // Update modal timestamp
    function updateModalTimestamp() {
      if (!advaitSubmissionTime) return;
      
      const now = new Date();
      const minutesAgo = Math.floor((now - advaitSubmissionTime) / 60000);
      const modalTimestamp = document.getElementById('modal-timestamp');
      
      if (modalTimestamp) {
        modalTimestamp.textContent = getTimeAgoText(minutesAgo);
      }
    }
    
    // Close issue modal
    function closeIssueModal() {
      document.getElementById('issue-modal').classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    // Open About modal
    function openAboutModal() {
      document.getElementById('about-modal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    // Close About modal
    function closeAboutModal() {
      document.getElementById('about-modal').classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    // Calculate time ago text
    function getTimeAgoText(minutesAgo) {
      if (minutesAgo < 60) {
        return `${minutesAgo} min ago`;
      } else {
        const hours = Math.floor(minutesAgo / 60);
        const mins = minutesAgo % 60;
        if (mins === 0) {
          return `${hours}h ago`;
        }
        return `${hours}h ${mins}m ago`;
      }
    }
    
    // Update all timestamps
    function updateTimestamps() {
      const now = new Date();
      
      if (isCheckedIn && advaitSubmissionTime) {
        // Advait has checked in - calculate based on his submission time
        const advaitMinutesAgo = Math.floor((now - advaitSubmissionTime) / 60000);
        
        // Update each person's timestamp
        document.getElementById('aarav-time').textContent = getTimeAgoText(advaitMinutesAgo + 32);
        document.getElementById('ananya-time').textContent = getTimeAgoText(advaitMinutesAgo + 24);
        document.getElementById('ishaan-time').textContent = getTimeAgoText(advaitMinutesAgo + 18);
        document.getElementById('riyas-time').textContent = getTimeAgoText(advaitMinutesAgo + 14);
        document.getElementById('advait-time').textContent = getTimeAgoText(advaitMinutesAgo);
      } else {
        // Advait hasn't checked in - use fixed offsets from current time
        const currentMinute = now.getMinutes();
        
        document.getElementById('aarav-time').textContent = getTimeAgoText(32);
        document.getElementById('ananya-time').textContent = getTimeAgoText(24);
        document.getElementById('ishaan-time').textContent = getTimeAgoText(18);
        document.getElementById('riyas-time').textContent = getTimeAgoText(14);
      }
    }
    
    // Start/stop timestamp updates
    function startTimestampUpdates() {
      if (timeUpdateInterval) {
        clearInterval(timeUpdateInterval);
      }
      updateTimestamps();
      // Update every minute
      timeUpdateInterval = setInterval(updateTimestamps, 60000);
    }
    
    function stopTimestampUpdates() {
      if (timeUpdateInterval) {
        clearInterval(timeUpdateInterval);
        timeUpdateInterval = null;
      }
    }

    function goToScreen3() {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('screen3').classList.add('active');
      window.scrollTo(0, 0);
      showConfetti();
      renderProjectSummaries();
      
      // Check edit limit (1 original + 1 edit = 2 total)
      const editBtn = document.getElementById('edit-btn-success');
      const editSubtitle = document.getElementById('edit-subtitle');
      const editLimitMsg = document.getElementById('edit-limit-msg');
      
      if (editHistory.length >= 2) {
        // Limit reached
        editBtn.classList.add('hidden');
        editSubtitle.classList.add('hidden');
        editLimitMsg.classList.remove('hidden');
      } else {
        // Still can edit
        editBtn.classList.remove('hidden');
        editSubtitle.classList.remove('hidden');
        editLimitMsg.classList.add('hidden');
      }
      
      // Start progress border animation (visual only, no auto-redirect)
      const progressBorder = document.getElementById('progress-border');
      if (progressBorder) {
        // Get button width and calculate perimeter
        const button = progressBorder.parentElement.parentElement.querySelector('button');
        const rect = button.getBoundingClientRect();
        const width = rect.width - 2;
        const height = rect.height - 2;
        
        // Update SVG rect size
        progressBorder.setAttribute('width', width);
        progressBorder.setAttribute('height', height);
        
        // Calculate perimeter of rounded rectangle (approximation)
        const perimeter = 2 * (width + height);
        progressBorder.setAttribute('stroke-dasharray', perimeter);
        progressBorder.setAttribute('stroke-dashoffset', perimeter);
        
        // Force reflow
        progressBorder.offsetHeight;
        
        // Animate stroke to 0 (complete outline)
        setTimeout(() => {
          progressBorder.style.strokeDashoffset = '0';
        }, 50);
      }
    }

    function goToScreen4() {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('screen4').classList.add('active');
      window.scrollTo(0, 0);
    }

    function goToScreen5() {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('screen5').classList.add('active');
      window.scrollTo(0, 0);
    }

    // Toggle notification settings
    let notificationsEnabled = true;
    function toggleNotifications() {
      notificationsEnabled = !notificationsEnabled;
      const toggle = document.getElementById('notification-toggle');
      const dot = document.getElementById('notification-dot');
      const reminderSection = document.getElementById('reminder-time-section');
      const reminderSelect = document.getElementById('reminder-time-select');
      
      if (notificationsEnabled) {
        toggle.classList.remove('bg-gray-200');
        toggle.classList.add('bg-rose-400');
        dot.classList.remove('translate-x-1');
        dot.classList.add('translate-x-6');
        reminderSection.classList.remove('opacity-50', 'pointer-events-none');
        reminderSelect.disabled = false;
      } else {
        toggle.classList.remove('bg-rose-400');
        toggle.classList.add('bg-gray-200');
        dot.classList.remove('translate-x-6');
        dot.classList.add('translate-x-1');
        reminderSection.classList.add('opacity-50', 'pointer-events-none');
        reminderSelect.disabled = true;
      }
    }

    // Mood selection
    function selectMood(project, mood) {
      if (project === 2 && !selectedProject1Mood) return;

      const prefix = project === 1 ? 'mood-1-' : 'mood-2-';
      
      // Reset all buttons for this project
      ['Vibing', 'Flowing', 'Struggling', 'Blocked'].forEach(m => {
        const btn = document.querySelector('.' + prefix + m.toLowerCase());
        btn.style.backgroundColor = '#F9FAFB';
        btn.style.borderColor = '#E5E7EB';
        btn.style.borderWidth = '2px';
        btn.style.boxShadow = 'none';
        btn.style.transform = 'scale(1)';
        btn.querySelector('span:last-child').className = 'text-xs font-medium text-gray-600';
      });

      // Apply selected style
      const selectedBtn = document.querySelector('.' + prefix + mood.toLowerCase());
      selectedBtn.style.backgroundColor = moodStyles[mood].bg;
      selectedBtn.style.borderColor = moodStyles[mood].border;
      selectedBtn.style.borderWidth = '1.5px';
      selectedBtn.style.boxShadow = moodStyles[mood].shadow;
      selectedBtn.style.transform = 'scale(1.05)';
      selectedBtn.querySelector('span:last-child').className = 'text-xs font-medium ' + moodTextColors[mood];

      if (project === 1) {
        selectedProject1Mood = mood;
        const fieldsDiv = document.getElementById('project1-fields');
        if (mood === 'Struggling' || mood === 'Blocked') {
          fieldsDiv.classList.add('show');
        } else {
          fieldsDiv.classList.remove('show');
          document.getElementById('project1-issue').value = '';
          document.getElementById('project1-helper').value = '';
        }
        unlockProject2();
      } else {
        selectedProject2Mood = mood;
        const fieldsDiv = document.getElementById('project2-fields');
        if (mood === 'Struggling' || mood === 'Blocked') {
          fieldsDiv.classList.add('show');
        } else {
          fieldsDiv.classList.remove('show');
          document.getElementById('project2-issue').value = '';
          document.getElementById('project2-helper').value = '';
        }
      }
      
      // Check for changes and update button state
      checkForChanges();
    }

    function unlockProject2() {
      document.getElementById('project2').className = 'bg-white rounded-2xl p-6 mb-4';
      document.getElementById('project2').querySelector('h2').className = 'text-lg font-semibold text-gray-900';
      document.getElementById('project2').querySelector('span').className = 'text-sm text-gray-400';
      document.getElementById('project2-locked-msg').classList.add('hidden');
      document.getElementById('project2-moods').classList.remove('hidden');
    }
    
    // Check if user has made changes while editing
    function checkForChanges() {
      if (!isCheckedIn || !originalState) return;
      
      // Get current values
      const currentIssue1 = document.getElementById('project1-issue').value;
      const currentIssue2 = document.getElementById('project2-issue').value;
      const currentHelper1 = document.getElementById('project1-helper').value;
      const currentHelper2 = document.getElementById('project2-helper').value;
      
      // Check if anything has changed
      const hasChanges = 
        selectedProject1Mood !== originalState.project1Mood ||
        selectedProject2Mood !== originalState.project2Mood ||
        currentIssue1 !== originalState.project1Issue ||
        currentIssue2 !== originalState.project2Issue ||
        currentHelper1 !== originalState.project1Helper ||
        currentHelper2 !== originalState.project2Helper;
      
      hasUnsavedChanges = hasChanges;
      updateSubmitButton();
    }
    
    // Update submit button state based on changes
    function updateSubmitButton() {
      const submitBtn = document.getElementById('submitBtn');
      
      if (isCheckedIn && editHistory.length < 2) {
        if (hasUnsavedChanges) {
          // User has made changes - enable button
          submitBtn.disabled = false;
          submitBtn.className = 'submit-btn w-full py-4 rounded-2xl text-lg font-medium bg-rose-400 text-white hover:bg-rose-500';
          submitBtn.textContent = 'Final Check-in';
        } else {
          // No changes - disable button
          submitBtn.disabled = true;
          submitBtn.className = 'submit-btn w-full py-4 rounded-2xl text-lg font-medium bg-gray-300 text-gray-500 cursor-not-allowed';
          submitBtn.textContent = 'Final Check-in';
        }
      }
    }
    
    // Discard changes and return to home
    function discardChanges() {
      // Restore original state
      if (originalState) {
        selectedProject1Mood = originalState.project1Mood;
        selectedProject2Mood = originalState.project2Mood;
        project1Issue = originalState.project1Issue;
        project2Issue = originalState.project2Issue;
        project1Helper = originalState.project1Helper;
        project2Helper = originalState.project2Helper;
      }
      
      // Reset change tracking
      hasUnsavedChanges = false;
      originalState = null;
      
      // Go back to home
      goToScreen1();
    }

    // Submit
    function handleSubmit() {
      project1Issue = document.getElementById('project1-issue').value;
      project2Issue = document.getElementById('project2-issue').value;
      project1Helper = document.getElementById('project1-helper').value;
      project2Helper = document.getElementById('project2-helper').value;
      
      // Clear previous error states
      document.querySelectorAll('.error-shake, .error-field').forEach(el => {
        el.classList.remove('error-shake', 'error-field');
      });
      
      let isValid = true;
      let firstErrorElement = null;
      
      // Validate Project 1
      if (!selectedProject1Mood) {
        const project1Card = document.querySelector('#project1-card');
        if (project1Card) {
          project1Card.classList.add('error-shake');
          if (!firstErrorElement) firstErrorElement = project1Card;
          // Clear shake after animation
          setTimeout(() => project1Card.classList.remove('error-shake'), 500);
        }
        isValid = false;
      } else if ((selectedProject1Mood === 'Struggling' || selectedProject1Mood === 'Blocked') && !project1Issue.trim()) {
        const issueField = document.getElementById('project1-issue');
        issueField.classList.add('error-field');
        if (!firstErrorElement) firstErrorElement = issueField;
        // Clear error after 3 seconds
        setTimeout(() => issueField.classList.remove('error-field'), 3000);
        isValid = false;
      }
      
      // Validate Project 2
      if (!selectedProject2Mood) {
        const project2Card = document.getElementById('project2');
        if (project2Card && !project2Card.classList.contains('border-dashed')) {
          project2Card.classList.add('error-shake');
          if (!firstErrorElement) firstErrorElement = project2Card;
          // Clear shake after animation
          setTimeout(() => project2Card.classList.remove('error-shake'), 500);
        }
        isValid = false;
      } else if ((selectedProject2Mood === 'Struggling' || selectedProject2Mood === 'Blocked') && !project2Issue.trim()) {
        const issueField = document.getElementById('project2-issue');
        issueField.classList.add('error-field');
        if (!firstErrorElement) firstErrorElement = issueField;
        // Clear error after 3 seconds
        setTimeout(() => issueField.classList.remove('error-field'), 3000);
        isValid = false;
      }
      
      if (!isValid) {
        document.getElementById('errorMessage').classList.remove('hidden');
        setTimeout(() => document.getElementById('errorMessage').classList.add('hidden'), 3000);
        
        // Scroll to first error
        if (firstErrorElement) {
          firstErrorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        return;
      }
      
      // Capture and display timestamp
      const now = new Date();
      advaitSubmissionTime = now; // Store submission time for timestamp calculations
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const timeString = `Updated at ${hours}:${minutes}`;
      document.getElementById('timestamp').textContent = timeString;
      document.getElementById('home-timestamp').textContent = timeString;
      
      // Track edit history with all details
      editHistory.push({
        timestamp: now,
        project1Mood: selectedProject1Mood,
        project2Mood: selectedProject2Mood,
        project1Issue: project1Issue,
        project2Issue: project2Issue,
        project1Helper: project1Helper,
        project2Helper: project2Helper
      });
      
      // Set checked in status (user has now submitted their check-in)
      isCheckedIn = true;
      
      // Reset change tracking since changes are now saved
      hasUnsavedChanges = false;
      originalState = null;
      
      goToScreen3();
    }
    
    // Add input event listeners to clear errors on user interaction
    document.addEventListener('DOMContentLoaded', function() {
      const project1IssueField = document.getElementById('project1-issue');
      const project2IssueField = document.getElementById('project2-issue');
      const project1HelperField = document.getElementById('project1-helper');
      const project2HelperField = document.getElementById('project2-helper');
      
      if (project1IssueField) {
        project1IssueField.addEventListener('focus', function() {
          this.classList.remove('error-field');
        });
        project1IssueField.addEventListener('input', checkForChanges);
      }
      
      if (project2IssueField) {
        project2IssueField.addEventListener('focus', function() {
          this.classList.remove('error-field');
        });
        project2IssueField.addEventListener('input', checkForChanges);
      }
      
      if (project1HelperField) {
        project1HelperField.addEventListener('change', checkForChanges);
      }
      
      if (project2HelperField) {
        project2HelperField.addEventListener('change', checkForChanges);
      }
    });

    // Success screen functions
    function showConfetti() {
      const container = document.getElementById('confetti-container');
      container.innerHTML = '';
      
      const colors = ['#FCA5A5', '#FBBF24', '#60A5FA', '#A78BFA', '#34D399'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'absolute w-2 h-2';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = '-10px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animation = `confetti-fall 3s linear ${Math.random() * 3}s forwards`;
        container.appendChild(confetti);
      }
      
      setTimeout(() => { container.innerHTML = ''; }, 6000);
    }

    function renderProjectSummaries() {
      const container = document.getElementById('project-summaries');
      
      const html = `
        <div class="bg-gray-100 rounded-2xl p-6 mb-4">
          <div class="flex items-start justify-between mb-2">
            <h3 class="text-base font-semibold text-gray-900">Agent Dashboard (1/2)</h3>
            <span class="text-3xl">${moodStyles[selectedProject1Mood].emoji}</span>
          </div>
          <p class="text-sm text-gray-600 mb-4">
            Status: <span class="font-medium text-gray-900">${selectedProject1Mood}</span>${project1Helper ? ` ‚Ä¢ @ ${project1Helper}` : ''}
          </p>
          ${project1Issue ? `
            <div class="border-t border-gray-300 pt-4">
              <p class="text-sm text-gray-700 italic">"${project1Issue}"</p>
            </div>
          ` : ''}
        </div>

        <div class="bg-gray-100 rounded-2xl p-6 mb-8">
          <div class="flex items-start justify-between mb-2">
            <h3 class="text-base font-semibold text-gray-900">Design Systems (2/2)</h3>
            <span class="text-3xl">${moodStyles[selectedProject2Mood].emoji}</span>
          </div>
          <p class="text-sm text-gray-600 mb-4">
            Status: <span class="font-medium text-gray-900">${selectedProject2Mood}</span>${project2Helper ? ` ‚Ä¢ @ ${project2Helper}` : ''}
          </p>
          ${project2Issue ? `
            <div class="border-t border-gray-300 pt-4">
              <p class="text-sm text-gray-700 italic">"${project2Issue}"</p>
            </div>
          ` : ''}
        </div>
      `;
      
      container.innerHTML = html;
    }

    function editCheckIn() {
      goToScreen2();
    }

    // Render edit history timeline
    function renderEditHistory() {
      const timelineList = document.getElementById('timeline-list');
      timelineList.innerHTML = '';
      
      // Reverse to show latest first
      const reversedHistory = [...editHistory].reverse();
      
      reversedHistory.forEach((entry, index) => {
        const hours = String(entry.timestamp.getHours()).padStart(2, '0');
        const minutes = String(entry.timestamp.getMinutes()).padStart(2, '0');
        const timeString = `${hours}:${minutes}`;
        
        // Get mood emojis
        const mood1Emoji = moodStyles[entry.project1Mood]?.emoji || '';
        const mood2Emoji = moodStyles[entry.project2Mood]?.emoji || '';
        
        // Original is now the last in reversed array
        const isOriginal = index === (reversedHistory.length - 1);
        const label = isOriginal ? 'Original Entry' : 'Final Entry';
        
        // Build issue details HTML
        let issueDetailsHTML = '';
        if (entry.project1Issue || entry.project2Issue) {
          issueDetailsHTML = '<div class="mt-2 space-y-2">';
          
          if (entry.project1Issue) {
            issueDetailsHTML += `
              <div class="text-xs">
                <p class="text-gray-700 italic">"${entry.project1Issue}"</p>
                ${entry.project1Helper ? `<p class="text-gray-500 mt-0.5">@ ${entry.project1Helper}</p>` : ''}
              </div>
            `;
          }
          
          if (entry.project2Issue) {
            issueDetailsHTML += `
              <div class="text-xs ${entry.project1Issue ? 'mt-2' : ''}">
                <p class="text-gray-700 italic">"${entry.project2Issue}"</p>
                ${entry.project2Helper ? `<p class="text-gray-500 mt-0.5">@ ${entry.project2Helper}</p>` : ''}
              </div>
            `;
          }
          
          issueDetailsHTML += '</div>';
        }
        
        const itemHTML = `
          <div class="flex items-start gap-3 py-3 ${index > 0 ? 'border-t border-gray-200' : ''}">
            <div class="flex-shrink-0 w-2 h-2 rounded-full bg-rose-400 mt-1.5"></div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm font-medium text-gray-900">${label}</span>
                <span class="text-xs text-gray-400">At ${timeString}</span>
              </div>
              <div class="space-y-1">
                <div class="flex items-center gap-2">
                  <span class="text-lg">${mood1Emoji}</span>
                  <span class="text-xs text-gray-600">Agent Dashboard</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-lg">${mood2Emoji}</span>
                  <span class="text-xs text-gray-600">Design Systems</span>
                </div>
              </div>
              ${issueDetailsHTML}
            </div>
          </div>
        `;
        
        timelineList.innerHTML += itemHTML;
      });
    }
    
    function doneCheckIn() {
      // Clear auto-transition timeout if user clicks Done early
      if (autoTransitionTimeout) {
        clearTimeout(autoTransitionTimeout);
        autoTransitionTimeout = null;
      }
      
      // Set checked in status
      isCheckedIn = true;
      
      // Update home page
      updateHomePage();
      
      // Go to home
      goToScreen1();
    }
    
    function updateHomePage() {
      // Update success badge vs pending
      const pendingUpdate = document.getElementById('pending-update');
      const successBadge = document.getElementById('success-badge');
      
      if (isCheckedIn) {
        pendingUpdate.classList.add('hidden');
        successBadge.classList.remove('hidden');
        successBadge.classList.add('flex');
        
        // Trigger zoom animation by resetting the badge container
        const badgeContainer = successBadge.querySelector('.badge-container');
        if (badgeContainer) {
          // Remove and re-add animation class to trigger it
          badgeContainer.style.animation = 'none';
          badgeContainer.offsetHeight; // Force reflow
          badgeContainer.style.animation = '';
        }
      } else {
        pendingUpdate.classList.remove('hidden');
        successBadge.classList.add('hidden');
        successBadge.classList.remove('flex');
      }
      
      // Update button text and style
      const btn = document.getElementById('check-in-btn');
      const homeEditBtn = document.getElementById('home-edit-btn');
      
      if (isCheckedIn) {
        // Hide the main check-in button
        btn.classList.add('hidden');
        // Show the view button next to timestamp
        homeEditBtn.classList.remove('hidden');
      } else {
        // Show the main check-in button
        btn.classList.remove('hidden');
        btn.textContent = 'Check-in Now';
        btn.className = 'w-full bg-rose-400 hover:bg-rose-500 text-white text-lg font-medium py-4 rounded-2xl mb-8 shadow-sm check-in-btn transition-all fade-in-up';
        btn.style.borderColor = '';
        // Hide the view button
        homeEditBtn.classList.add('hidden');
      }
      
      // Count blockers - both projects can be blockers
      let blockerCount = 0;
      if (isCheckedIn) {
        if (selectedProject1Mood === 'Blocked') blockerCount++;
        if (selectedProject2Mood === 'Blocked') blockerCount++;
      }
      
      // Update team count
      const checkedInCount = isCheckedIn ? 5 : 4;
      document.getElementById('team-status').textContent = `${checkedInCount} of 6 checked in ‚Ä¢ ${blockerCount} blocker${blockerCount !== 1 ? 's' : ''}`;
      
      // Update Advait's card in grid view
      const advaitCard = document.getElementById('advait-card');
      const blockerIcon = document.getElementById('advait-blocker-icon');
      const advaitTile = advaitCard.closest('.team-member');
      
      if (isCheckedIn) {
        advaitCard.className = 'w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-green-100 border-2 border-green-300';
        advaitTile.classList.add('checked-in');
        
        // Show blocker icon if any blocker
        if (blockerCount > 0) {
          blockerIcon.classList.remove('hidden');
          blockerIcon.classList.add('flex');
        } else {
          blockerIcon.classList.add('hidden');
          blockerIcon.classList.remove('flex');
        }
      } else {
        advaitCard.className = 'w-20 h-20 rounded-2xl flex items-center justify-center text-4xl mb-3 bg-white border-2 border-gray-200';
        advaitTile.classList.remove('checked-in');
        blockerIcon.classList.add('hidden');
        blockerIcon.classList.remove('flex');
      }
      
      // Update list view if currently active
      updateListViewStatus();
      
      // Start coin flip animation if checked in
      if (isCheckedIn) {
        startCoinFlip();
        updateHomeTimestamp();
        startHomeTimestampUpdates();
      } else {
        stopCoinFlip();
      }
    }
    
    // Coin flip animation functions
    function startCoinFlip() {
      // Clear any existing interval
      stopCoinFlip();
      
      // Start the coin flip cycle: flip every 6 seconds
      coinFlipInterval = setInterval(() => {
        const container = document.getElementById('badge-flip-container');
        if (container) {
          // Flip to show profile emoji
          container.style.transform = 'rotateY(180deg)';
          container.style.transition = 'transform 0.6s ease-in-out';
          
          // Flip back after 2 seconds
          setTimeout(() => {
            container.style.transform = 'rotateY(0deg)';
          }, 2000);
        }
      }, 6000);
    }
    
    function stopCoinFlip() {
      if (coinFlipInterval) {
        clearInterval(coinFlipInterval);
        coinFlipInterval = null;
        
        // Reset to front face
        const container = document.getElementById('badge-flip-container');
        if (container) {
          container.style.transform = 'rotateY(0deg)';
        }
      }
    }
    
    // Update home page timestamp to show "x min ago"
    function updateHomeTimestamp() {
      if (!advaitSubmissionTime || !isCheckedIn) return;
      
      const now = new Date();
      const minutesAgo = Math.floor((now - advaitSubmissionTime) / 60000);
      const homeTimestamp = document.getElementById('home-timestamp');
      
      if (homeTimestamp) {
        homeTimestamp.textContent = getTimeAgoText(minutesAgo);
      }
    }
    
    // Start updating home timestamp every minute
    function startHomeTimestampUpdates() {
      updateHomeTimestamp();
      setInterval(updateHomeTimestamp, 60000); // Update every minute
    }
    
    // Smoke animation for vibe emojis - one-time burst
    let smokeAnimationPlayed = false;
    const vibeEmojis = ['üî•', 'üòä', 'üò∞', 'üò≠'];
    
    function playSmokeBurst() {
      if (smokeAnimationPlayed || isCheckedIn) return;
      
      // Only show animation if at least one person has checked in (4 or more)
      const teamStatusText = document.getElementById('team-status').textContent;
      const checkedInMatch = teamStatusText.match(/(\d+) of \d+ checked in/);
      const checkedInCount = checkedInMatch ? parseInt(checkedInMatch[1]) : 0;
      
      if (checkedInCount === 0) return; // Don't show animation if no one checked in
      
      const container = document.getElementById('smoke-container');
      if (!container) return;
      
      // Create 12 emojis with varied timing - some start later
      // Timing pattern: quick burst, pause, second wave, pause, final trickle
      const timingPattern = [
        0,    // emoji 1 - immediate
        60,   // emoji 2
        120,  // emoji 3
        180,  // emoji 4
        900,  // emoji 5 - starts when first ones are halfway (after ~1s)
        1000, // emoji 6
        1100, // emoji 7
        1700, // emoji 8 - another late arrival
        1800, // emoji 9
        2400, // emoji 10 - final trickle
        2500, // emoji 11
        2600  // emoji 12
      ];
      
      for (let i = 0; i < 12; i++) {
        setTimeout(() => {
          createBurstEmoji(i);
        }, timingPattern[i]);
      }
      
      smokeAnimationPlayed = true;
    }
    
    function createBurstEmoji(index) {
      const container = document.getElementById('smoke-container');
      if (!container) return;
      
      const emoji = document.createElement('div');
      emoji.className = 'smoke-emoji';
      emoji.textContent = vibeEmojis[index % vibeEmojis.length];
      
      // Create varied drift patterns for natural spread
      const driftPatterns = [-35, -20, -10, -5, 5, 10, 20, 35, -25, 15, -15, 25];
      const drift = driftPatterns[index];
      emoji.style.setProperty('--drift-x', `${drift}px`);
      
      // Add slight rotation for organic movement
      const rotations = [15, -12, 10, -15, 18, -10, 12, -18, 14, -16, 11, -13];
      emoji.style.setProperty('--rotate', `${rotations[index]}deg`);
      
      // All start from exact same point (0,0 relative to container at bullet point)
      emoji.style.left = '0px';
      emoji.style.top = '0px';
      
      container.appendChild(emoji);
      
      // Remove after animation completes
      setTimeout(() => {
        emoji.remove();
      }, 4000);
    }
    
    // Initialize smoke animation on page load if not checked in
    document.addEventListener('DOMContentLoaded', function() {
      if (!isCheckedIn) {
        // Delay slightly to let page settle
        setTimeout(() => {
          playSmokeBurst();
        }, 1000);
      }
      if (isCheckedIn) {
        startHomeTimestampUpdates();
      }
    });
    
    // Show vibe emojis when clicking on team member tiles
    function showVibeEmojis(member, tileElement) {
      // Hardcoded vibe data for each team member
      const vibeData = {
        'aarav': [
          { emoji: 'üî•', type: 'vibing' },
          { emoji: 'üòä', type: 'flowing' },
          { emoji: 'üòä', type: 'flowing' }
        ],
        'ananya': [
          { emoji: 'üî•', type: 'vibing' },
          { emoji: 'üòä', type: 'flowing' }
        ],
        'ishaan': [
          { emoji: 'üî•', type: 'vibing' },
          { emoji: 'üî•', type: 'vibing' }
        ],
        'riyas': [
          { emoji: 'üòä', type: 'flowing' },
          { emoji: 'üòä', type: 'flowing' }
        ],
        'advait': [] // Dynamic - will be calculated
      };
      
      // For Advait, calculate based on actual check-in data
      if (member === 'advait' && isCheckedIn) {
        vibeData.advait = [];
        
        // Add emojis based on project moods
        if (selectedProject1Mood === 'Vibing') vibeData.advait.push({ emoji: 'üî•', type: 'vibing' });
        if (selectedProject1Mood === 'Flowing') vibeData.advait.push({ emoji: 'üòä', type: 'flowing' });
        if (selectedProject1Mood === 'Struggling') vibeData.advait.push({ emoji: 'üò∞', type: 'struggling' });
        if (selectedProject1Mood === 'Blocked') vibeData.advait.push({ emoji: 'üò≠', type: 'blocked' });
        
        if (selectedProject2Mood === 'Vibing') vibeData.advait.push({ emoji: 'üî•', type: 'vibing' });
        if (selectedProject2Mood === 'Flowing') vibeData.advait.push({ emoji: 'üòä', type: 'flowing' });
        if (selectedProject2Mood === 'Struggling') vibeData.advait.push({ emoji: 'üò∞', type: 'struggling' });
        if (selectedProject2Mood === 'Blocked') vibeData.advait.push({ emoji: 'üò≠', type: 'blocked' });
      }
      
      const vibes = vibeData[member];
      if (!vibes || vibes.length === 0) return;
      
      // Get the avatar div position (center of the tile)
      const avatarDiv = tileElement.querySelector('.w-20');
      const rect = avatarDiv.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      // Create emojis with varied timing like smoke
      const timingPattern = [0, 80, 160, 240]; // Staggered starts
      
      vibes.forEach((vibe, index) => {
        setTimeout(() => {
          createVibeEmoji(vibe.emoji, centerX, centerY, index);
        }, timingPattern[index] || index * 100);
      });
    }
    
    function createVibeEmoji(emoji, startX, startY, index) {
      const emojiEl = document.createElement('div');
      emojiEl.className = 'vibe-emoji-burst';
      emojiEl.textContent = emoji;
      
      // Position at center of tile
      emojiEl.style.left = startX + 'px';
      emojiEl.style.top = startY + 'px';
      
      // Random horizontal drift for organic movement (-40px to +40px)
      const driftPatterns = [-35, -15, 15, 35, -25, 25, -10, 10];
      const drift = driftPatterns[index] || (Math.random() - 0.5) * 60;
      emojiEl.style.setProperty('--drift-x', `${drift}px`);
      
      // Add slight rotation for organic movement
      const rotations = [12, -15, 10, -12, 14, -10, 15, -14];
      const rotate = rotations[index] || (Math.random() - 0.5) * 30;
      emojiEl.style.setProperty('--rotate', `${rotate}deg`);
      
      document.body.appendChild(emojiEl);
      
      // Remove after animation completes
      setTimeout(() => {
        emojiEl.remove();
      }, 3000);
    }
    
    // Time picker functions
    let currentAmPm = 'AM';
    
    function incrementHour() {
      const hourInput = document.getElementById('hour-input');
      let hour = parseInt(hourInput.value);
      hour = hour >= 12 ? 1 : hour + 1;
      hourInput.value = hour;
    }
    
    function decrementHour() {
      const hourInput = document.getElementById('hour-input');
      let hour = parseInt(hourInput.value);
      hour = hour <= 1 ? 12 : hour - 1;
      hourInput.value = hour;
    }
    
    function incrementMinute() {
      const minuteInput = document.getElementById('minute-input');
      let minute = parseInt(minuteInput.value);
      minute = minute >= 59 ? 0 : minute + 1;
      minuteInput.value = String(minute).padStart(2, '0');
    }
    
    function decrementMinute() {
      const minuteInput = document.getElementById('minute-input');
      let minute = parseInt(minuteInput.value);
      minute = minute <= 0 ? 59 : minute - 1;
      minuteInput.value = String(minute).padStart(2, '0');
    }
    
    function setAmPm(period) {
      currentAmPm = period;
      const amBtn = document.getElementById('am-btn');
      const pmBtn = document.getElementById('pm-btn');
      
      if (period === 'AM') {
        amBtn.className = 'flex-1 py-2 rounded-lg text-sm font-medium bg-white text-gray-900 shadow-sm transition-all';
        pmBtn.className = 'flex-1 py-2 rounded-lg text-sm font-medium text-gray-500 transition-all';
      } else {
        amBtn.className = 'flex-1 py-2 rounded-lg text-sm font-medium text-gray-500 transition-all';
        pmBtn.className = 'flex-1 py-2 rounded-lg text-sm font-medium bg-white text-gray-900 shadow-sm transition-all';
      }
    }
    
    // Format minute input on blur
    document.addEventListener('DOMContentLoaded', function() {
      const minuteInput = document.getElementById('minute-input');
      if (minuteInput) {
        minuteInput.addEventListener('blur', function() {
          const val = parseInt(this.value) || 0;
          this.value = String(Math.min(59, Math.max(0, val))).padStart(2, '0');
        });
      }
      
      const hourInput = document.getElementById('hour-input');
      if (hourInput) {
        hourInput.addEventListener('blur', function() {
          const val = parseInt(this.value) || 1;
          this.value = Math.min(12, Math.max(1, val));
        });
      }
    });
  </script>
</body>
</html>
